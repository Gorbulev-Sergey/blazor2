@page "/books"

@using blazor2.Services
@inject IBookServise service

<h3>Книги</h3>

<EditForm Model="@новая_книга" OnValidSubmit="@OnValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="card bg-light shadow">
        <div class="card-body">
            <h3>Добавить книгу:</h3>
            <div class="form-group">
                <input id="name" type="text" class="form-control" placeholder="Название книги" @bind="новая_книга.name" />
            </div>
            <div class="form-group">
                <input id="author" type="text" class="form-control" placeholder="Автор книги" @bind="новая_книга.author" />
            </div>
            <input type="submit" class="btn btn-dark" value="Добавить" />
        </div>        
    </div>    
</EditForm>


@foreach (blazor2.Models.книга новая_книга in service.get().Reverse())
{
    <div class="card mt-3">
        <div class="card-header">
            <h3>Книга: @новая_книга.name</h3>
        </div>
        <div class="card-body">
            <p>Автор: @новая_книга.author</p>
        </div>
    </div>
}

@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();

        //service.add(new Models.книга { name = "Программирование на C#", author = "Сидоров С.А." });
        //service.add(new Models.книга { name = "Основы Python", author = "Петров П.С." });
        //service.add(new Models.книга { name = "Что такое net.core", author = "Смыслов С.В." });
    }

    blazor2.Models.книга новая_книга = new Models.книга();

    private void OnValidSubmit()
    {
        service.add(новая_книга);
    }
}
